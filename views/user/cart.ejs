<%- include('../header'); %>
<body>
    <container class="jumbotron">

<h1>Your Cart!</h1>
<nav>
    <a href="/home"><h3>Home</h3></a>
    <a href="/home/orders"><h3>Orders</h3></a>
</nav>
    </container>
</br>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

<div>
    <% items.forEach(function(item){ %>
        <ul class="img-thumbnail" >
            <img src=<%= item.image %> >
            <h1><%= item.name %> </h1>
            <h3> â‚¹ <%=  item.price %> </h3>
            <label>quantity</label>
            <input type="number" id="quantity" min="1" value="<%- quantity[item._id].quantity %>">
            <h3>
                <%- quantity[item._id].total_price %>
            </h3>
            <button class="delete-button" onclick="onItemClick('<%- item._id %>')" id="<%- item._id %>"  >Delete</button>
            </ul>
    <% }) %> 
</div>


<form method="get" action="/home/confirm_order">
      <input type="hidden" name="amount" value="<%= amount %>" /> 
      
      <% if(amount > 0){ %>
        <div>
            <h1>Amount : </h1> <h2><%- amount %></h2>
        </div>
        <button>Checkout</button>
      <%}else{%>
        <i>"Your Cart Is Empty, Add Some Items To It."</i>
      <%}%>
</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    function onItemClick(itemID){
        
        $.ajax({
            url: "/home/cart",
            type: "DELETE",
            data: {"item_id": itemID},
            success: function(){
                window.location.reload();
            }
        });
        
    }

</script>
</body>
</html>