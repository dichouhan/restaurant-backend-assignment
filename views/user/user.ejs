<%- include('../header'); %>
<body>
    <container class="jumbotron">

<h1>XYZ Restaurant</h1>

<nav>
    <a href="/home/cart"><h3>Cart</h3></a>
    <a href="/home/orders"><h3>Orders</h3></a>
    <a onclick="logout()">Log Out</a>
</nav>

    <h3>browse through the curated list of your favourite items!</h3>
    </container>
</br>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

<div>
    <% items.forEach(function(item){ %>
        <ul class="img-thumbnail" >
            <img src=<%= item.image %> >
            <h1><%= item.name %> </h1>
            <h3> â‚¹ <%=  item.price %> </h3>
            <label>quantity</label>
            <input id="<%=item._id%>" type="number" id="quantity" min="1" value="1">
            <button class="delete-button" onclick="onItemClick('<%- item._id %>', event)"  >add to cart</button>
            </ul>
    <% }) %> 
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    function onItemClick(itemID, event){
        let quantity = document.getElementById(itemID).value
        $.ajax({
            url: "/home/cart",
            type: "PUT",
            data: {"product_id": itemID, "quantity": quantity},
            success: function(){
                window.alert("Item added to the cart!")
                window.location.reload();
            }
        });
     
    }

    function logout() {
        document.cookie = 'auth=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';

        window.location.href = "/login";
    }

</script>
</body>
</html>